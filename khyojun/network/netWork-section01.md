## 네트워크 기초


### 네트워크란?
>노드(node)와 링크(link)가 서로 연결되어 있으며 리소스를 공유하는 집합을 의미한다.

이 표현은 근데 너무 딱딱하다. 다른 말로 해서 컴퓨터를 두 대 이상 연결하여 서로 데이터를 전송할 수 있는 통신망이라고 생각하자.

- 노드 : 서버, 라우터, 스위치 등 네트워크 장치
- 링크 : 유선, 무선 같은 연결되는 회선을 의미

---

### 처리량
> 처리량(throughput)이란 링크를 통해 전달되는 단위 시간당 데이터양을 말합니다.
> 단위로는 bps(bits per second)를 사용하며 초당 전송 또는 수신되는 비트 수라는 의미입니다.

이 처리량이란 친구는 사용자들이 많이 접속할 때마다 커지는 `트래픽`, `네트워크 장치 간의 대역폭`, `네트워크 중간에 발생하는 에러`, `장치의 하드웨어 스펙`에 영향을 받게 된다.

### 레이턴시(지연 시간)
어디선가 계속 레이턴시, 레이턴시 하면서 들었던 적이 있었는데 지연 시간이라는 의미였다.
>지연 시간(latency)란 요청이 처리되는 시간 메시지가 두 장치를 왕복하는데 걸리는 시간을 의미  
ex) 초기 출발 후 :800ms 다시 돌아오는 시간 : 900ms 레이턴시: 1.7s

### 네트워크가 지연되는 이유

지연 시간이 `매체 타입(유선, 무선)`, `패킷 크기`, `라우터의 패킷 처리 시간`에 영향을 받는다.
또
- 전송 미디어 : 가장 큰 영향을 미친다. (매체 타입)
- 네트워크 트래픽 이동 거리 : 서버와 최종 사용자의 지리적인 거리가 너무 멀면 지연 시간이 길어진다.
- 네트워크 *홉 수 : 중간 라우터가 여러 개인 경우 필요한 홉 수가 증가하기 때문이다.
- 데이터 볼륨 : 네트워크 디바이스의 처리 용량이 제한 될 수 있어서 지연 시간이 증가한다.
- 서버 성능: 성능이 좋지 않아 지연 시간이 길어질 수 있다.

### 홉이 뭔가요?
> 홉: 컴퓨터 네트워크에서 출발지와 목적지 사이에 위치한 경로의 한 부분이다.


### 패킷은 무엇일까?
웹 사이트를 보는 것도 마찬가지지만 네트워크나 인터넷에서 데이터를 주고 받으려면, 웹 브라우저에서 사진과 문자를 보여주기 위해서는 규칙이 있어야 한다. 그 규칙에는 패킷(packet)을 사용한다

>패킷(packet): 네트워크를 통해 전송되는 데이터의 작은 조각. 큰 데이터가 있더라도 작게 나누어서 보내는 것이다.

### 왜 단위를 나눌까?

어찌보면 하나로 보내면 좋을 거 같은데 굳이 작게 쪼개서 나눠서 전송하는 이유가 무엇일까?
1. 크게 보내면 대역폭을 너무 크게 차지해 버린다.
2. 1번과 같이 되면 다른 패킷의 흐름을 막아버릴 수 있다.

그렇게 큰 데이터들을 분할하여 전송을 한 후 전송이 완료되면 원래대로 합치는 작업을 수행한다.
다만, 전송한 패킷이 네트워크가 지연되어 늦게 도착하거나 누락되는 등 전송 순서대로 도착하지 않을 수 있기 때문에 패킷 번호(디지털 데이터)를 부여하고 도착 후 패킷 번호(디지털 데이터)에 맞춰 정렬한다.

---

### 네트워크 토폴로지

>네트워크 토폴로지: 네트워크를 설계할 때 고려를 하는 요소. 노드와 링크를 어떻게 배치되어 있는지에 대한 방식이자 연결 형태



### 1. 트리 토폴로지
<img src="../../../Downloads/나무형(tree)_copy.png" width="300" >

트리 토폴로지는 계층형 토폴로지라고 하며 트리 형태로 배치한 네트워크 구성을 말한다.

#### 특징
- 노드의 추가, 삭제가 쉽다.
- 특정 노드에 트래픽이 집중될 때 하위의 노드에 영향을 끼칠 수 있다.




### 2. 버스 토폴로지
   <img src="../../../Downloads/버스.png" width="300" >

버스 토폴로지는 중앙 통신 회선 하나에 여러 개의 노드가 연결되어 공유하는 네트워크 구성이다.

#### 특징
- 근거리 통신망(LAN)에서 사용한다.
- 설치 비용이 적고, 신뢰성이 우수하다.
- 노드의 추가, 삭제가 쉽다.
- 그러나 *스푸핑이 가능하다는 문제가 있다.


### 스푸핑?
> 스푸핑은 LAN상에서 송신부의 패킷을 송신과 관련 없는 다른 호스트에 가지 않도록 하는 스위칭 기능을 마비시키거나 속여서
>  특정 노드에 해당 패킷이 오도록 처리하는 것이다.

개념은 긴데 단순하게 말하자면 A 에서 B로 가야하는 것이 스푸핑이 적용되면 생뚱 맞게 A -> C(나쁜 사람 노드) -> B로 가게 되는 것이다.

그러면 우리 전송시킨 데이터는 악의적인데 사용이 될 가능성이 높은 것이다.

### 3. 스타 토폴로지
<img src="../../../Downloads/star.jpg" width="300" >

중앙에 있는 노드에 모두 연결된 네트워크 구성을 말한다.

#### 특징
- 노드를 추가, 에러를 탐지하기 쉽고, 패킷의 충돌 발생 가능성이 적다.
- 어떠한 노드에 장애가 일어나도 쉽게 발견할 수 있다.
- 중앙 노드에서만 에러가 아니면 다른 노드에 영향을 끼치지 않는다.
- 중앙 노드에서 에러 발생 시 전체 네트워크를 사용할 수 없다.
- 설치 비용이 비싸다.



### 4. 링형 토폴로지
<img src="../../../Downloads/ling.jpg" width="300" >

각각의 노드가 양 옆의 두 노드와 연결하여 전체적으로 고리처럼 하나의 연속된 길을 통해 통신을 하는 망 구성 방식

#### 특징
- 노드 수가 증가되어도 네트워크상의 손실이 거의 없다.
- 충돌 발생 가능성도 적다.
- 노드의 고장 발견을 쉽게 발견한다.
- 네트워크 구성이 어렵다.
- 회선에 장애가 일어나면 전체 네트워크에 영향을 끼친다.


### 5. 메시 토폴로지
<img src="../../../Downloads/mesh.jpg" width="300" >

망형 토폴로지라고도 하며 그물망처럼 연결되어 있는 구조이다.

#### 특징
- 여러 개의 경로로 연결되어 있기 때문에 한 단말 장치에 장애가 발생해도 네트워크를 계속 사용할 수 있다.
- 트래픽 분산 처리가 가능하다.
- 노드의 추가가 어렵다.
- 구축 비용과 운용 비용이 비싸다.

---

### 네트워크 토폴로지가 중요한 이유?

네트워크 토폴로지가 중요한 이유는 바로 `병목 현상`이라는 것을 찾을 때 중요한 기준이 되기 때문이다.

### 병목 현상
<img src="../../../Downloads/bottleneck.webp" width="300" >


> 병목(bottle neck) 현상은 전체 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상이다.

트래픽이 몰리게 되었는데 만약 네트워크 토폴로지의 구성이 서버에서 게이트웨이로 이어지는 회선이 단 1곳밖에 없다면?
병의 목쪽에 데이터들이 몰려있는 것처럼 트래픽이 몰려 레이턴시가 엄청 길어지게 되는 것이다.

### 병목 현상 해결을 어떻게?

대표적으론 2가지라고 한다.
1. 병목 위치를 파악해서 어떻게든 해결하는 것 (이것을 튜닝이라고도 하며, 병목 위치를 작은 단위로 세분화 한다고 한다.)
2. 시스템 이용자 수를 제한하는 것 (매우 직관적 -> 서버에서 트래픽 초과로 차단됬다고 메시지를 표시)

1번의 경우에는 네트워크 토폴로지가 어떻게 되어있는지 확인하고 서버와 서버 간 그리고 게이트웨이로 이어지는 회선을 추가하는 예시들이 있다.

---

### 네트워크 분류
크게 3가지이다. LAN(Local),MAN(Metropolitan),WAN(Wide)


3가지에 대해서는 간단하게 설명하자면
- LAN : 근거리 통신망, 전송속도가 빠르고 혼잡하지 않음
- MAN : 대도시 지역 네트워크, 전송 속도가 평균, LAN보다 혼잡
- WAN : 광역 네트워크, 국가 또는 대륙단위, 전송 속도가 느리다, MAN보다 혼잡하다.


---

### 병목 현상의 주 원인
- 네트워크 대역폭
- 네트워크 토폴로지
- 서버 CPU, 메모리 사용량
- 비효율적인 네트워크 구성

이런 병목 현상들의 원인이 있는데 이런 것들의 원인을 찾고 성능을 분석하는 명령어들이 있다고 한다.

### 네트워크 성능 분석 명령어

- ping : 네트워크 상태를 확인하려는 대상 노드에게 일정 크기의 패킷을 전송하는 명령어
    - 이를 통해 해당 노드의 패킷 수신 상태, 도달 시간 등을 알 수 있다.
    - TCP/IP 중 *ICMP 프로토콜을 통해 동작하게 된다.
    - ping [IP 주소 또는 도메인 주소로 실행]
### ICMP?
> ICMP는 TCP/IP에서 IP 패킷을 처리할 때 발생되는 문제를 알려주는 프로토콜이다.


- netstat : 접속되어 있는 서비스들의 네트워크 상태를 표시하는 데 사용된다.
    - 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여준다.
    - **서비스의 포트가 열려 있는지 확인할 때 쓴다.**

- nslookup : DNS에 관련된 내용을 확인하기 위해 쓰는 명령어
    - 특정 도메인에 매핑된 IP를 확인하기 위해 사용

- tracert : 윈도우에서는 tracert 리눅스에서는  목적지 노드까지 네트워크 경로를 확인할 때 사용하는 명령어
    - 목적지 노드까지 구간들 중 어느 구간에서 응답 시간이 느려지는 등 확인


**이것들 이외에도 많은 명령어들이 있지만 네트워크 분석 프로그램으로 wireshark, netmon등을 사용한다.**

---

### 네트워크 프로토콜 표준화

다른 장치들끼리 데이터를 주고받기 위해 설정된 공통된 인터페이스 IEEE, IETF라는 단체에서 이를 정한다.